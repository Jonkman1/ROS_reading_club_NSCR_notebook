{
  "hash": "36740d684a185be915eb6d8fef1b7d21",
  "result": {
    "markdown": "---\ntitle: \"Simulation\"\nauthor: \"X Y (Chair)\"\nformat:\n  html: \n    grid: \n      margin-width: 350px\n  pdf: default\nreference-location: margin\ncitation-location: margin\n---\n\n\n## Summary\n\nIn this book *Regression and Other Stories* and in practice Gelman et all. use simulation for different reasons: \\\n- use probability models to mimic variation in the world (tools of simulation can help us better to understand how this variation plays out); \\\n- use simulation to approximate the sampling distribution of data and propagate this to the sampling distribution of statistical estimates and procedures;\\\n- regression models are not deterministic; they produce probabilisitc predictions. Simulation is the most convenient and general way to represent uncertainties in forecasts. \n\nBecause of this, chapter 5 introduces simulations (basic ideas and tools to perform it in `R`).\n\n\nDifferent examples are given of simulations of discrete, continuous, and mixed discrete/ continuous models are presented.\n\nHere is an discrete model example: Across the world the probability a baby will be born a girl is about $48.8\\%$, with the probability of a boy then being about $51.2\\%$. If you wanted to get a sense of how many girls you'd expect out of 400 births, you could simulate using the `rbinom()` function.\n\n\n::: {.cell .column-margin}\n\n```{.r .cell-code}\nset.seed(5)\n# use set seed here because we want to get the same results every time we run the code\n\nrbinom(n = 1, size = 400, prob = 0.488)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 188\n```\n:::\n:::\n\n\nGraph results of 1000 simulations:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\n# this is from Solomon Kurz's book, he avoids working with loops\n\nset.seed(5)\n# set the global plotting theme\ntheme_set(theme_linedraw() +\n            theme(panel.grid = element_blank()))\n\n# set the seed\nset.seed(5)\n\n# simulate\ntibble(girls = rbinom(n = 1000, size = 400, prob = .488)) %>% \n  \n  # plot\n  ggplot(aes(x = girls)) +\n  geom_histogram(binwidth = 5) +\n  scale_x_continuous(\"# girls out of 400\", breaks = 7:9 * 25) +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.05)))\n```\n\n::: {.cell-output-display}\n![](05-chapter_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nThere are many settings where it makes sense to use a set of simulation draws to summarize a distribution, which can represent a simulation from a probability model, a prediction for a future outcome from a fitted regression, or uncertainty about parameters in a fitted model.\n\nHere the **tidyverse** oriented flow, as Kurz defined it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(5)\n\ntibble(z = rnorm(1e4, mean = 5, sd = 2)) %>% \n  summarise(mean   = mean(z),\n            median = median(z),\n            sd     = sd(z),\n            mad_sd = mad(z))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 4\n   mean median    sd mad_sd\n  <dbl>  <dbl> <dbl>  <dbl>\n1  5.00   4.99  2.02   2.03\n```\n:::\n:::\n\n\nIn this book they use the Bayesian simulation approach for regression models. Bootstrap is also a simulation approach, but it is not as general as Bayesian simulation. It is very general, any estimate can be simulated, and it is easy to use with complex models. But it has limitations (for example leading to an answer with an inappropriately high level of certainty). This method is not used in the book.\n\n## Presentation\n",
    "supporting": [
      "05-chapter_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}